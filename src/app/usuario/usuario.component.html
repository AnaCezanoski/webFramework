<div *ngIf="showSuccessMessages" class="alert alert-success" role="alert">
    Usuário cadastrado com sucesso!
</div>
<div *ngIf="showErrorMessages" class="alert alert-danger" role="alert">
    {{ errorMessage }}
</div>

<h2 id="titulo">Cadastro de Usuário</h2>
<br>
<div class="container">
    <form [formGroup]="formGroup" (ngSubmit)="salvar()"> 
        <div class="col-sm">
            <label for="nome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="nome" 
            placeholder="Digite seu Nome"
            formControlName="nome">
            <div class="invalid-feedback"
            [style.display]="formGroup.controls.nome.invalid
            && formGroup.controls.nome.touched ? 'block' : 'none'">Digite o nome corretamente.
            </div>
        </div>
        <br>
        <div class="mb-3">
            <label for="arquivo" class="form-label">Imagem</label>
            <input type="file" class="form-control" id="arquivo" (change)="selectFile($event)"
            formControlName="arquivo">
            <input type="hidden" formControlName="imagem">
            <div class="invalid-feedback"
            [style.display]="formGroup.controls.arquivo.invalid
            && formGroup.controls.arquivo.touched ? 'block' : 'none'">Selecione uma imagem.
            </div>
        </div>
        <br>
        <div class="row g-2">
            <div class="col-sm-6">
                    <label for="dtNasc" class="form-label">Data de Nascimento</label>
                    <input type="date" class="form-control" id="dtNasc"
                    placeholder="Digite sua Data de Nascimento"
                    formControlName="dtNasc">
                    <div class="invalid-feedback"
                    [style.display]="formGroup.controls.dtNasc.invalid
                    && formGroup.controls.dtNasc.touched ? 'block' : 'none'">Digite a data corretamente.
                    </div>
            </div>
            <div class="col-sm-6">
                <label for="email" class="form-label">E-mail</label>
                <input type="email" class="form-control" id="email"
                placeholder="Digite seu E-mail"
                formControlName="email">
                <div class="invalid-feedback"
                [style.display]="formGroup.controls.email.invalid
                && formGroup.controls.email.touched ? 'block' : 'none'">Digite o e-mail corretamente.
                </div>
            </div>
        </div>
        <br>
        <div class="row g-2">
            <div class="col-sm-6">
                <label for="telefone" class="form-label">Telefone</label>
                <input type="text" class="form-control" id="telefone"  
                placeholder="Digite seu Telefone"
                formControlName="telefone">
                <div class="invalid-feedback"
                [style.display]="formGroup.controls.telefone.invalid
                && formGroup.controls.telefone.touched ? 'block' : 'none'">Digite o telefone corretamente.
                </div>
            </div>
            <div class="col-sm-6">
                <label for="cpf" class="form-label">CPF</label>
                <input type="text" class="form-control" id="cpf"  
                placeholder="Digite seu CPF"
                formControlName="cpf">
                <div class="invalid-feedback"
                [style.display]="formGroup.controls.cpf.invalid
                && formGroup.controls.cpf.touched ? 'block' : 'none'">Digite o CPF corretamente.
                </div>
            </div>
        </div>
        <br>
        <div class="col-sm">
            <label for="endereco" class="form-label">Endereço</label>
            <input type="text" class="form-control" id="endereco" 
            placeholder="Digite seu endereço"
            formControlName="endereco">
            <div class="invalid-feedback"
            [style.display]="formGroup.controls.endereco.invalid
            && formGroup.controls.endereco.touched ? 'block' : 'none'">Digite o endereço corretamente.
            </div>
        </div>
        <br>
        <div *ngIf="!isEditMode" class="row g-2">
            <div class="col-sm-6">
                <label for="senha" class="form-label">Senha</label>
                <input type="password" class="form-control" id="senha" 
                placeholder="Digite uma senha"
                formControlName="senha">
                <div class="invalid-feedback"
                [style.display]="formGroup.controls.senha.invalid
                && formGroup.controls.senha.touched ? 'block' : 'none'">Digite uma senha válida.
                </div>
            </div>
            <div class="col-sm-6">
                <label for="confirmSenha" class="form-label">Confirmar senha</label>
                <input type="password" class="form-control" id="confirmSenha" 
                placeholder="Confirme sua senha"
                formControlName="confirmSenha">
                <div class="invalid-feedback"
                [style.display]="formGroup.controls.confirmSenha.invalid
                && formGroup.controls.confirmSenha.touched ? 'block' : 'none'">Repita sua senha.
                </div>
            </div>
        </div>
        <br>
        <div class="button">
            <button type="submit" class="btn btn-primary">Salvar</button>
        </div>
    </form>        
    <br>
</div>